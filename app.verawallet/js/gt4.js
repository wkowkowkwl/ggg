!function(t){"use strict";if(void 0===t)throw new Error("Geetest requires browser environment");var e=t.document,r=t.Math,n=e.getElementsByTagName("head")[0];function o(t){this._obj=t}o.prototype={_each:function(t){var e=this._obj;for(var r in e)e.hasOwnProperty(r)&&t(r,e[r]);return this},_extend:function(t){var e=this;new o(t)._each((function(t,r){e._obj[t]=r}))}};function a(t){var e=this;new o(t)._each((function(t,r){e[t]=r}))}a.prototype={apiServers:["gcaptcha4.geetest.com","gcaptcha4.geevisit.com","gcaptcha4.gsensebot.com"],staticServers:["static.geetest.com","static.geevisit.com","dn-staticdown.qbox.me"],protocol:"http://",typePath:"/load",fallback_config:{bypass:{staticServers:["static.geetest.com","static.geevisit.com","dn-staticdown.qbox.me"],type:"bypass",bypass:"/v4/bypass.js"}},_get_fallback_config:function(){var t=this;return c(t.type)?t.fallback_config[t.type]:t.fallback_config.bypass},_extend:function(t){var e=this;new o(t)._each((function(t,r){e[t]=r}))}};var c=function(t){return"string"==typeof t},i=function(t){return"function"==typeof t},s=/Mobi/i.test(navigator.userAgent),u={},l={},f=Object.prototype.toString;function p(t,e){if((r=t)!==Object(r)||function(t){return"[object Date]"==f.call(t)}(t)||function(t){return"[object RegExp]"==f.call(t)}(t)||function(t){return"[object Boolean]"==f.call(t)}(t)||function(t){return"function"==typeof t}(t))return e?function(t){return t.replace(/(\S)(_([a-zA-Z]))/g,(function(t,e,r,n){return e+n.toUpperCase()||""}))}(t):t;var r;if(function(t){return"[object Array]"==f.call(t)}(t))for(var n=[],o=0;o<t.length;o++)n.push(p(t[o]));else{n={};for(var a in t)t.hasOwnProperty(a)&&(n[p(a,!0)]=p(t[a]))}return n}var g=function(t,e,r,n){e=function(t){return t.replace(/^https?:\/\/|\/$/g,"")}(e);var a=function(t){return 0!==(t=t.replace(/\/+/g,"/")).indexOf("/")&&(t="/"+t),t}(r)+function(t){if(!t)return"";var e="?";return new o(t)._each((function(t,r){(c(r)||function(t){return"number"==typeof t}(r)||function(t){return"boolean"==typeof t}(r))&&(e=e+encodeURIComponent(t)+"="+encodeURIComponent(r)+"&")})),"?"===e&&(e=""),e.replace(/&$/,"")}(n);return e&&(a=t+e+a),a},d=function(o,a,c,i,s,u,l){var f=function(p){if(l){var d="geetest_"+(parseInt(1e4*r.random())+(new Date).valueOf());t[d]=function(t,e){if("function"==typeof t){var r=Array.prototype.slice.call(arguments,2);return Function.prototype.bind?t.bind(e,r):function(){var n=Array.prototype.slice.call(arguments);return t.apply(e,r.concat(n))}}}(l,null,d),s.callback=d}!function(t,r,o){var a=e.createElement("script");a.charset="UTF-8",a.async=!0,/static\.geetest\.com/g.test(t)&&(a.crossOrigin="anonymous"),a.onerror=function(){r(!0),c=!0};var c=!1;a.onload=a.onreadystatechange=function(){c||a.readyState&&"loaded"!==a.readyState&&"complete"!==a.readyState||(c=!0,setTimeout((function(){r(!1)}),0))},a.src=t,n.appendChild(a),setTimeout((function(){c||(a.onerror=a.onload=null,a.remove&&a.remove(),r(!0))}),o||1e4)}(g(a,c[p],i,s),(function(e){if(e){if(d)try{t[d]=function(){t[d]=null}}catch(t){}p>=c.length-1?u(!0):f(p+1)}else u(!1)}),o.timeout)};f(0)},v=function(t,e,r){if("function"!=typeof e.onError)throw new Error({networkError:"ç½‘ç»œé”™è¯¯",gtTypeError:"gtå­—æ®µä¸æ˜¯å­—ç¬¦ä¸²ç±»åž‹"}[t]);e.onError({desc:r.desc,msg:r.msg,code:r.code})};(t.Geetest||e.getElementById("gt_lib"))&&(l.slide="loaded");t.initGeetest4=function(n,c){var f,g=new a(n);n.https?g.protocol="https://":n.protocol||(g.protocol=t.location.protocol+"//"),"object"==typeof(f=n.getType)&&null!==f&&g._extend(n.getType),function(e,n,o,a){d(o,o.protocol,e,n,{captcha_id:o.captchaId,challenge:o.challenge||"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*r.random()|0;return("x"===t?e:3&e|8).toString(16)})),client_type:s?"h5":"web",risk_type:o.riskType,user_info:o.userInfo,call_type:o.callType,lang:o.language?o.language:"Netscape"===navigator.appName?navigator.language.toLowerCase():navigator.userLanguage.toLowerCase()},(function(t){t&&"function"==typeof o.offlineCb?o.offlineCb():t&&a(o._get_fallback_config())}),(function(e,r){"success"==r.status?a(r.data):(r.status,a(r)),t[e]=void 0;try{delete t[e]}catch(t){}}))}(g.apiServers,g.typePath,g,(function(r){if("error"===(r=p(r)).status)return v("networkError",g,r);var n=r.type;g.debug&&new o(r)._extend(g.debug);var a=function(){g._extend(r),c(new t.Geetest4(g))};u[n]=u[n]||[];var s=l[n]||"init";if("init"===s)l[n]="loading",u[n].push(a),r.gctPath&&d(g,g.protocol,Object.hasOwnProperty.call(g,"staticServers")?g.staticServers:r.staticServers||g.staticServers,r.gctPath,null,(function(t){t&&v("networkError",g,{code:"60205",msg:"Network failure",desc:{detail:"gct resource load timeout"}})})),d(g,g.protocol,Object.hasOwnProperty.call(g,"staticServers")?g.staticServers:r.staticServers||g.staticServers,r.bypass||r.staticPath+r.js,null,(function(t){if(t)l[n]="fail",v("networkError",g,{code:"60204",msg:"Network failure",desc:{detail:"js resource load timeout"}});else{l[n]="loaded";for(var e=u[n],r=0,o=e.length;r<o;r+=1){var a=e[r];i(a)&&a()}u[n]=[]}}));else{if("loaded"===s)return function(t){var r=!1,n={js:"script",css:"link"}[t.split(".").pop()];if(void 0!==n){var o=e.getElementsByTagName(n);for(var a in o)(o[a].href&&o[a].href.toString().indexOf(t)>0||o[a].src&&o[a].src.toString().indexOf(t)>0)&&(r=!0)}return r}(r.gctPath)||d(g,g.protocol,Object.hasOwnProperty.call(g,"staticServers")?g.staticServers:r.staticServers||g.staticServers,r.gctPath,null,(function(t){t&&v("networkError",g,{code:"60205",msg:"Network failure",desc:{detail:"gct resource load timeout"}})})),a();"fail"===s?v("networkError",g,{code:"60204",msg:"Network failure",desc:{detail:"js resource load timeout"}}):"loading"===s&&u[n].push(a)}}))}}(window);